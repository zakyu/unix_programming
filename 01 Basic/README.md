# UNIX基础知识

## UNIX体系结构

- 从严格意义上说，可将操作系统定义为一种软件，它控制计算机硬件资源，提供程序运行环境。通常将这种软件称为内核。
- 内核的接口被称为系统调用。
- 公用函数库构建在系统调用接口之上。
- 应用程序即可使用公用函数库，也可使用系统调用。
- shell是一个特殊的应用程序，为运行其他应用程序提供了一个接口。

## 登录

1. 登录名
    - 口令文件（/etc/passwd）
    - 登录项：登录名、加密口令、数字用户ID、数字组ID、注释字段、起始目录(/home/username)、shell程序
2. shell
    - Bourne shell: /bin/sh
    - Bourne-again shell: /bin/bash
    - C shell: /bin/csh
    - Korn shell: /bin/ksh
    - TENEX C shell

## 文件和目录

1. 文件系统
   - UNIX文件系统是目录和文件的一种层次结构，所有东西的起点是称为根（root）的目录，这个目录的名称是一个字符“/”。
   - 目录（directory）是一个包含目录项的文件。在逻辑上，可以认为每个目录项都包含一个文件名，同时还包含说明该文件属性的信息。
   - 文件属性是指文件类型、文件大小、文件所有者、文件权限、文件最后的修改时间等。

2. 文件名
3. 路径名
4. 工作目录
5. 起始目录

## 输入和输出

1. 文件描述符：通常是一个小的非负整数，内核用以标识一个特定进程正在访问的文件。
2. 标准输入、标准输出、标准错误：每当运行一个新程序时，所有的shell都为其打开的3个文件描述符。
3. 不带缓冲的I/O：open、read、write、lseek、close
4. 标准I/O

## 程序和进程

1. 程序
   - 程序是一个存储在磁盘上某个目录中的可执行文件。
   - 内核使用exec函数，将程序读入内存，并执行程序。
2. 进程和进程ID
   - 程序的执行实例称为进程。
   - 某些操作系统用任务（task）表示正在被执行的程序。
   - UNIX系统确保每个进程都有一个唯一的非负整数数字标识符，称为进程ID。
   - 进程控制：有3个用于进程控制的主要函数fork、exec、waitpid。
3. 线程和线程ID
   - 一个进程内的所有线程共享同一地址空间、文件描述符、栈以及与进程相关的属性。
   - 线程ID只在它所属的进程内起作用。

## 出错处理

当UNIX系统函数出错时，通常返回一个负值，而且整型变量errno通常被设置为具有特定信息的值。

出错恢复：致命性出错、非致命性出错。

## 用户标识

- 用户ID
- 组ID
- 组文件将组名映射为数值的组ID。 /etc/group
- 附属组ID

## 信号

- 信号（signal）用于通知进程发生了某种情况。
- 3种处理信号的方式：
  - 忽略信号。
  - 按系统默认方式处理。
  - 提供一个函数，信号发生时调用该函数，这被称为捕捉该信号。
- 终端键盘上两种产生信号的方法：中断键、退出键。
- 一个进程可以调用kill函数向另一进程发送信号。当向一个进程发送信号时，我们必须是那个进程的所有者或超级用户。


## 时间值

- 日历时间
- 进程时间，也称CPU时间，用于度量进程使用的CPU资源。
- 度量一个进程的执行时间：时钟时间、用户CPU时间、系统CPU时间。
  - 时钟时间，进程运行的时间总量。
  - 用户CPU时间，执行用户指令所用的时间量。
  - 系统CPU时间，为该进程执行内核程序所经历的时间。

## 系统调用和库函数

系统调用通常提供一种最小接口，而库函数通常提供比较复杂的功能。